import { AllNews, CategoryNews, ColumnNews, MainNews, CategoryTitle, AdBanner, Breadcrumbs } from "@/app/components";
import NewsList from "@/app/components/listNews/listNews";
import Image from "next/image";
import styles from "./page.module.css";
import CurrencyRates from "@/app/components/hero/CurrencyRates";
import WeatherWidget from "@/app/components/hero/WeatherWidget";
import adBannerIndfomo from '@/assets/images/Ad Banner black.png';
import banner3 from '@/assets/images/banner3.png';
import { getBreadCrumbsNav } from "@/assets/utils/getTranslateCategory";

interface ArticlePageProps {
  params: Promise<{
    id: string;
  }>;
  searchParams?: Promise<{ [key: string]: string | string[] | undefined }>;
}

export default async function ArticlePage({ params, searchParams }: ArticlePageProps) {
  const { id } = await params;
  
  // Перевіряємо, чи існує id
  if (!id) {
    return <div>Новина не знайдена</div>;
  }

  // Моковані дані для різних статей
  const getArticleData = (articleId: string) => {
    const articles = {
      'front-news-101': {
        id: articleId,
        title: "На фронті від початку доби - 101 зіткнення, бої точаться на семи напрямках",
        lead: "Військові дії на сході України продовжують загострюватися. За даними Генерального штабу, протягом доби відбулося 101 бойове зіткнення на семи основних напрямках.",
        content: `Військові дії на сході України продовжують загострюватися. За даними Генерального штабу, протягом доби відбулося 101 бойове зіткнення на семи основних напрямках.

Найактивніші бойові дії відбуваються на Куп'янському, Лиманському та Бахмутському напрямках. Противник намагається просунутися вперед, але українські захисники стійко тримають оборону та завдають значних втрат ворогу.

За даними розвідки, російські війська перегруповують сили та підтягують резерви. Експерти вважають, що це може свідчити про підготовку до нових наступальних дій.

Українські захисники продовжують успішно відбивати атаки противника та завдавати йому значних втрат. За останню добу знищено понад 20 одиниць бронетехніки та близько 300 особового складу ворога.`,
        imageUrl: "https://picsum.photos/800/500?random=front",
        imageAlt: "Військові дії на фронті",
        photoCredit: "ФОТО: Генеральний штаб ЗСУ",
        source: "ДЖЕРЕЛО: фото Олена Ляхович, Гал-інфо",
        author: "Максим Петренко",
        date: "02 липня 2025",
        time: "14:54",
        category: "ВІЙНА",
        tags: ["ФРОНТ", "БОЙОВІ ДІЇ", "ЗСУ", "РОСІЯ", "ОБОРОНА"]
      },
      'it-innovations-war': {
        id: articleId,
        title: "Війна на сході: як ІТ-інновації змінюють стратегію оборони",
        lead: "Українські ІТ-спеціалісти розробляють революційні технології, які кардинально змінюють підхід до ведення бойових дій на сучасному театрі воєнних дій.",
        content: `Українські ІТ-спеціалісти розробляють революційні технології, які кардинально змінюють підхід до ведення бойових дій на сучасному театрі воєнних дій.

Від штучного інтелекту для аналізу розвідувальних даних до дронів з автономним навігуванням - українські розробники створюють інструменти, які дають ЗСУ значну перевагу над противником.

"Ми перетворили війну на цифрову гру, де технологія визначає переможця", - каже керівник одного з ІТ-проектів Міноборони. "Наші алгоритми можуть проаналізувати тисячі зображень за секунди та виявити загрози, які людина може пропустити".

Особливу увагу приділяється розробці систем кібербезпеки, які захищають українську інфраструктуру від кібератак противника. Експерти стверджують, що кіберпростір став новим полем бою.`,
        imageUrl: "https://picsum.photos/800/500?random=it",
        imageAlt: "Люди за столами на IT конференції",
        photoCredit: "ФОТО: Міністерство цифрової трансформації",
        source: "ДЖЕРЕЛО: фото Олена Ляхович, Гал-інфо",
        author: "Анна Коваленко",
        date: "04 липня 2025",
        time: "11:15",
        category: "ТЕХНОЛОГІЇ",
        tags: ["ІТ", "ІННОВАЦІЇ", "ВІЙНА", "КІБЕРБЕЗПЕКА", "ДРОНИ"]
      },
      'golub-war-nova-poshta': {
        id: articleId,
        title: "Як 'Голуб' із 'Нової пошти' став 'Голубом війни'",
        lead: "Історія про те, як звичайний кур'єр 'Нової пошти' перетворився на одного з найвідоміших бойових пілотів України, використовуючи свої навички логістики на полі бою.",
        content: `Історія про те, як звичайний кур'єр "Нової пошти" перетворився на одного з найвідоміших бойових пілотів України, використовуючи свої навички логістики на полі бою.

"Голуб" - це позивний 32-річного Андрія Петренка, який до війни працював кур'єром у "Новій пошті". Його досвід у плануванні маршрутів та доставці вантажів виявився неоцінним у бойових умовах.

"Я знав кожен куточок міста, кожен під'їзд, кожну вулицю", - розповідає Андрій. "Це допомогло мені стати експертом з логістики на фронті. Я можу доставити будь-що будь-куди, навіть під вогнем противника".

За рік служби "Голуб" здійснив понад 200 бойових вильотів, доставив тонни гуманітарної допомоги та евакуював десятки поранених. Його історія стала символом того, як звичайні українці перетворюються на героїв.`,
        imageUrl: "https://picsum.photos/800/500?random=golub",
        imageAlt: "Військовий у формі посміхається",
        photoCredit: "ФОТО: Пресслужба ЗСУ",
        source: "ДЖЕРЕЛО: фото Олена Ляхович, Гал-інфо",
        author: "Олександр Мороз",
        date: "02 липня 2025",
        time: "14:54",
        category: "ВІЙНА",
        tags: ["ГЕРОЇ", "ЗСУ", "ЛОГІСТИКА", "ПІЛОТ", "НОВА ПОШТА"]
      },
      'example-article': {
        id: articleId,
        title: "Офіс Генпрокурора та СБУ викрили нардепа від ОПЗЖ Христенка у держзраді",
        lead: "Офіс Генерального прокурора та Служба безпеки України викрили народного депутата від партії ОПЗЖ у державній зраді. За даними слідства, він мав зв'язки з ФСБ та передавав секретну інформацію.",
        content: `Офіс Генерального прокурора та Служба безпеки України (СБУ) викрили народного депутата від партії "Опозиційна платформа - За життя" (ОПЗЖ) у державній зраді. За даними слідства, він мав зв'язки з Федеральною службою безпеки (ФСБ) та передавав секретну інформацію.

Слідчі встановили, що нардеп систематично збирава та передавав російським спецслужбам інформацію про обороноздатність України, переміщення військ та плани командування. Він також намагався впливати на прийняття рішень у Верховній Раді на користь російських інтересів.

Під час обшуків у його офісі та помешканні було знайдено компрометуючі документи, електронні носії з секретною інформацією та засоби зв'язку, які використовувалися для комунікації з російськими кураторами.

Генеральна прокуратура України відкрила кримінальне провадження за статтею 111 Кримінального кодексу України (державна зрада). Народному депутату загрожує позбавлення волі на строк від 12 до 15 років або довічне позбавлення волі з конфіскацією майна.

Це не перший випадок, коли представники ОПЗЖ звинувачуються у державній зраді. Раніше СБУ викрила кількох членів партії у співпраці з російськими спецслужбами та фінансуванні терористичних організацій.`,
        imageUrl: "https://picsum.photos/800/500?random=article",
        imageAlt: "Офіс Генпрокурора та СБУ під час обшуку",
        photoCredit: "ФОТО: Офіс Генерального прокурора",
        source: "ДЖЕРЕЛО: фото Олена Ляхович, Гал-інфо",
        author: "Уляна Безпалько",
        date: "02 липня 2025",
        time: "14:54",
        category: "ПОЛІТИКА",
        tags: ["ДЕПУТАТИ", "НАБУ", "ДЕРЖАВНА ЗРАДА", "ОПЗЖ", "ЗЛОВЖИВАННЯ"]
      },
      // Додаткові статті для новин з ColumnNews
      'mamography-lviv-july': {
        id: articleId,
        title: "Львів'янок запрошують на безплатну мамографію щосуботи у липні",
        lead: "Для мешканок Львівської громади у липні організовано безплатну скринінгову мамографію щосуботи, для проходження якої необхідне електронне скерування від сімейного лікаря та попередній запис.",
        content: `Для мешканок Львівської громади у липні організовано безплатну скринінгову мамографію щосуботи, для проходження якої необхідне електронне скерування від сімейного лікаря та попередній запис. Про це повідомляє ЛМР.

Акція спрямована на раннє виявлення захворювань грудей та покращення якості життя жінок. Медичний персонал буде працювати в зручний для всіх час, а сама процедура займає не більше 15-20 хвилин.

Організатори наголошують на важливості регулярних обстежень, які допомагають виявити можливі захворювання на ранній стадії. Статистика показує, що раннє виявлення значно підвищує шанси на успішне лікування.`,
        imageUrl: "https://picsum.photos/800/500?random=mamography",
        imageAlt: "Мамографічний апарат з рожевими елементами",
        photoCredit: "ФОТО: Львівська міська рада",
        source: "ДЖЕРЕЛО: фото Олена Ляхович, Гал-інфо",
        author: "Марія Іваненко",
        date: "02 липня 2025",
        time: "14:54",
        category: "ЗДОРОВ'Я",
        tags: ["МАМОГРАФІЯ", "ЛЬВІВ", "БЕЗПЛАТНО", "ПРОФІЛАКТИКА", "ЖІНКИ"]
      },
      'ukraine-health-campaign-august': {
        id: articleId,
        title: "Загальноукраїнська акція з безкоштовної перевірки здоров'я жінок стартує у серпні",
        lead: "У серпні 2025 року стартує загальноукраїнська кампанія з безкоштовних обстежень для жінок. Акція відкрита для всіх, хто попередньо зареєструється.",
        content: `У серпні 2025 року стартує загальноукраїнська кампанія з безкоштовних обстежень для жінок. Акція відкрита для всіх, хто попередньо зареєструється.

Медичні заклади по всій Україні готуються до масштабної кампанії з профілактики захворювань грудей. Організатори очікують рекордну кількість учасниць та забезпечують високу якість обслуговування.

Кожна жінка зможе пройти комплексне обстеження, включаючи консультацію лікаря-мамолога та необхідні лабораторні дослідження. Експерти наголошують на важливості регулярних профілактичних оглядів.`,
        imageUrl: "https://picsum.photos/800/500?random=health",
        imageAlt: "Жінка робить самообстеження грудей",
        photoCredit: "ФОТО: Міністерство охорони здоров'я",
        source: "ДЖЕРЕЛО: фото Олена Ляхович, Гал-інфо",
        author: "Олена Петренко",
        date: "15 липня 2025",
        time: "10:00",
        category: "ЗДОРОВ'Я",
        tags: ["ЗДОРОВ'Я", "ПРОФІЛАКТИКА", "ЖІНКИ", "БЕЗКОШТОВНО", "УКРАЇНА"]
      },
      'charity-concert-lviv-cancer': {
        id: articleId,
        title: "У Львові відбудеться благодійний концерт на підтримку онкохворих",
        lead: "15 липня 2025 року у Львові відбудеться благодійний концерт на підтримку онкохворих. Заходи відбуватимуться в центрі міста з участю місцевих талантів.",
        content: `15 липня 2025 року у Львові відбудеться благодійний концерт на підтримку онкохворих. Заходи відбуватимуться в центрі міста з участю місцевих талантів.

Організатори планують зібрати кошти для закупівлі сучасного медичного обладнання та підтримки пацієнтів. У програмі концерту - виступи відомих львівських музикантів, театральні постановки та виступи поетів.

Всі кошти, зібрані під час заходу, будуть направлені на покращення умов лікування онкохворих у регіоні. Це не перший благодійний захід у місті, але найбільший за масштабом.`,
        imageUrl: "https://picsum.photos/800/500?random=concert",
        imageAlt: "Лікар у білому халаті дивиться в камеру",
        photoCredit: "ФОТО: Львівська обласна рада",
        source: "ДЖЕРЕЛО: фото Олена Ляхович, Гал-інфо",
        author: "Андрій Коваль",
        date: "10 липня 2025",
        time: "18:30",
        category: "КУЛЬТУРА",
        tags: ["БЛАГОДІЙНІСТЬ", "ЛЬВІВ", "ОНКОХВОРІ", "КОНЦЕРТ", "МЕДИЦИНА"]
      },
      // Статті для новин з Hero компонента
      'zelensky-new-law-hero': {
        id: articleId,
        title: "Зеленський підписав новий закон про цифровізацію держави",
        lead: "Президент України Володимир Зеленський підписав новий закон, який спрямований на прискорення цифровізації держави та покращення якості надання державних послуг громадянам.",
        content: `Президент України Володимир Зеленський підписав новий закон, який спрямований на прискорення цифровізації держави та покращення якості надання державних послуг громадянам.

Закон передбачає створення єдиної цифрової платформи для взаємодії громадян з державними органами, впровадження електронного документообігу та цифрових підписів для всіх державних послуг.

"Це важливий крок до створення сучасної, ефективної та зрозумілої держави", - зазначив Зеленський під час підписання документа. "Тепер громадяни зможуть отримувати необхідні послуги, не виходячи з дому".

Експерти вважають, що новий закон значно прискорить процес цифровізації України та зробить державні послуги більш доступними для населення.`,
        imageUrl: "https://picsum.photos/800/500?random=zelensky",
        imageAlt: "Володимир Зеленський підписує документ",
        photoCredit: "ФОТО: Офіс Президента України",
        source: "ДЖЕРЕЛО: фото Олена Ляхович, Гал-інфо",
        author: "Олександр Петренко",
        date: "03 липня 2025",
        time: "16:30",
        category: "ПОЛІТИКА",
        tags: ["ЗЕЛЕНСЬКИЙ", "ЗАКОН", "ЦИФРОВІЗАЦІЯ", "ДЕРЖАВНІ ПОСЛУГИ", "УКРАЇНА"]
      },
      'ukraine-thunderstorms-hero': {
        id: articleId,
        title: "В Україні прогнозують сильні грози та зливи",
        lead: "Український гідрометеоцентр попереджає про несприятливі погодні умови в найближчі дні. Очікуються сильні грози, зливи та поривчастий вітер на більшій частині території країни.",
        content: `Український гідрометеоцентр попереджає про несприятливі погодні умови в найближчі дні. Очікуються сильні грози, зливи та поривчастий вітер на більшій частині території країни.

За прогнозами синоптиків, найбільш несприятливі умови очікуються в західних та центральних областях України. Тут можуть бути дощі з грозою, поривчастий вітер до 15-20 м/с та локальні зливи.

Метеорологи закликають громадян бути обережними та не залишати дім без необхідності під час негоди. Особливу увагу слід приділити безпеці на дорогах та уникати перебування під деревами під час гроз.`,
        imageUrl: "https://picsum.photos/800/500?random=thunderstorm",
        imageAlt: "Гроза над містом",
        photoCredit: "ФОТО: Український гідрометеоцентр",
        source: "ДЖЕРЕЛО: фото Олена Ляхович, Гал-інфо",
        author: "Марія Коваленко",
        date: "03 липня 2025",
        time: "14:15",
        category: "ПОГОДА",
        tags: ["ГРОЗА", "ЗЛИВА", "ПОГОДА", "УКРАЇНА", "ПРОГНОЗ"]
      },
      'trump-interview-hero': {
        id: articleId,
        title: "Трамп дав нове інтерв'ю про майбутнє американської політики",
        lead: "Колишній президент США Дональд Трамп дав ексклюзивне інтерв'ю, в якому розповів про свої плани щодо майбутньої політичної діяльності та ставлення до поточної адміністрації.",
        content: `Колишній президент США Дональд Трамп дав ексклюзивне інтерв'ю, в якому розповів про свої плани щодо майбутньої політичної діяльності та ставлення до поточної адміністрації.

У розмові з журналістами Трамп зазначив, що він продовжує активно займатися політикою та підтримує зв'язки зі своїми прихильниками по всій країні. "Я не збираюся залишати політичну арену", - сказав він.

Експерти аналізують можливість повернення Трампа до активної політичної діяльності та його вплив на майбутні вибори. Багато хто вважає, що його позиція залишається значною в республіканській партії.`,
        imageUrl: "https://picsum.photos/800/500?random=trump",
        imageAlt: "Дональд Трамп дає інтерв'ю",
        photoCredit: "ФОТО: Associated Press",
        source: "ДЖЕРЕЛО: фото Олена Ляхович, Гал-інфо",
        author: "Ігор Мороз",
        date: "03 липня 2025",
        time: "12:45",
        category: "СВІТ",
        tags: ["ТРАМП", "США", "ПОЛІТИКА", "ІНТЕРВ'Ю", "ВИБОРИ"]
      }
    };

    return articles[articleId as keyof typeof articles] || articles['example-article'];
  };

  const articleData = getArticleData(id);

  // Функція для генерації випадкових новин для NewsList
  const generateRandomNews = (count: number) => {
    const titles = [
      "Зеленський підписав новий закон",
      "В Україні прогнозують грози",
      "Трамп дав нове інтерв'ю",
      "На Львівщині відкрили парк",
      "Вчені винайшли новий велосипед",
      "Новий арт-проєкт у центрі Києва",
      "Економічні новини та аналітика",
      "Спортивні події та досягнення",
      "Культурні заходи та фестивалі",
      "Медичні новини та здоров'я",
    ];

    const articleIds = [
      "zelensky-new-law",
      "ukraine-thunderstorms",
      "trump-interview",
      "lviv-region-park",
      "scientists-bicycle",
      "kyiv-art-project",
      "economic-news",
      "sports-events",
      "cultural-events",
      "medical-news"
    ];

    return Array.from({ length: count }, (_, index) => ({
      id: `article-${index + 1}`,
      title: titles[Math.floor(Math.random() * titles.length)],
      time: new Date(
        Date.now() - Math.floor(Math.random() * 1e8)
      ).toLocaleString("uk-UA", {
        day: "2-digit",
        month: "long",
        year: "numeric",
        hour: "2-digit",
        minute: "2-digit",
      }),
      imageUrl: `https://picsum.photos/seed/${Math.random()}/300/200`,
      url: `/article/${articleIds[Math.floor(Math.random() * articleIds.length)]}-${index + 1}`,
    }));
  };

  // Генеруємо дані для трьох колонок NewsList
  const newsData1 = generateRandomNews(8);
  const newsData2 = generateRandomNews(8);
  const newsData3 = generateRandomNews(8);

  console.log(articleData?.category, 'cat')

  return (
    <>
      <div className={styles.container}>
        {/* Основний контент - ліва частина */}
        <div className={styles.mainContent}>
        {/* Breadcrumbs навігація */}
        <Breadcrumbs 
          items={[
            { label: 'ГОЛОВНА', href: '/' },
            { label: articleData.category, href: `/category/${getBreadCrumbsNav(articleData.category.toLowerCase())}` },
            { label: 'НОВИНА' }
          ]} 
        />
        <AdBanner className={styles.adBannerStandard} />
          {/* Заголовок статті */}
          <div className={styles.articleHeader}>
            <h1 className={styles.articleTitle}>{articleData.title}</h1>
            <p className={styles.articleLead}>{articleData.lead}</p>
          </div>
          
          {/* Основне зображення статті */}
          <div className={styles.articleImage}>
            <Image 
              src={articleData.imageUrl}
              alt={articleData.imageAlt}
              width={800}
              height={500}
              className={styles.mainImage}
              priority={true}
            />
            <div className={styles.imageCredits}>
              <span className={styles.photoCredit}>{articleData.photoCredit}</span>
              <span className={styles.source}>{articleData.source}</span>
            </div>
          </div>
          
          {/* Основний текст статті */}
          <div className={styles.articleContent}>
            {articleData.content.split('\n\n').map((paragraph, index) => (
              <p key={index} className={styles.paragraph}>
                {paragraph}
              </p>
            ))}
          </div>
          
          {/* Метадані статті */}
          <div className={styles.articleMetadata}>
            <div className={styles.tags}>
              {articleData.tags.map((tag, index) => (
                <span key={index} className={styles.tag}>
                  {tag}
                </span>
              ))}
            </div>
            <div className={styles.authorInfo}>
              Автор: {articleData.author}
            </div>
          </div>
          
          {/* Рекламний банер */}
          <AdBanner className={styles.adBannerStandard} />
          
          {/* Колонка новин - без заголовка */}
          <ColumnNews 
            newsQuantity={4} 
            smallImg={true} 
            category="ПОЛІТИКА" 
            secondCategory=""
            showNewsList={false} 
            hideHeader={true} 
            className={styles.columnNewsStandard}
          />
          
          {/* Рекламний банер */}
          <AdBanner className={styles.adBannerStandard} />
          
          {/* Категорія новин - без заголовка */}
          <CategoryNews
            height={133} 
            category="ЕКОНОМІКА" 
            hideHeader={true} 
            className={styles.categoryNewsStandard}
          />
        </div>

        {/* Права частина - три колонки NewsList */}
        <div className={styles.sidebar}>
          <div className={styles.newsColumn}>
            <Image 
              src={banner3} 
              alt="banner3" 
              width={600} 
              height={240} 
              className={styles.banner3}
              priority={false}
            />
          </div>
          <div className={styles.infoSection}>
            <CurrencyRates />
            <WeatherWidget />
          </div>
          <div className={styles.rightSeparator}></div>
          
          <div className={styles.newsColumn}>
            <NewsList
              arrowRightIcon
              title="ПОЛІТИКА"
              data={newsData1}
              showImagesAt={[0, 1]}
              showMoreButton={true}
              moreButtonUrl="/category/politics"
              widthPercent={100}
            />
          </div>
          
          {/* Сепаратор між правими компонентами */}
          <div className={styles.rightSeparator}></div>
          <div className={styles.newsColumn}>
            <Image 
              src={adBannerIndfomo} 
              alt="IN-FOMO Banner" 
              width={600} 
              height={240} 
              className={styles.fomoLogo}
              priority={false}
            />
          </div>
        </div>
      </div>
      <div className={styles.containerAllNews}>
        <AllNews
          customTitle="Більше новин"
        />
      </div>
    </>
  );
}
